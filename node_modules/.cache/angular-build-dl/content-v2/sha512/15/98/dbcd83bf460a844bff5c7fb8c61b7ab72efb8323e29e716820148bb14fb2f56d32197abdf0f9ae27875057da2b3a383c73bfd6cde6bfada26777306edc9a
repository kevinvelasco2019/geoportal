{"version":3,"sources":["webpack:///src/app/rutas/rutas.page.html","webpack:///src/app/rutas/rutas-routing.module.ts","webpack:///src/app/rutas/rutas.module.ts","webpack:///src/app/rutas/rutas.page.scss","webpack:///src/app/rutas/rutas.page.ts"],"names":["routes","path","component","RutasPageRoutingModule","imports","forChild","exports","RutasPageModule","declarations","RutasPage","geolocation","taskService","seccion","mapa","map","plataforma","textoBuscar","directionsService","google","maps","DirectionsService","directionsDisplay","DirectionsRenderer","origin","lat","lng","destination","establecimientos","markers","position","title","sector","obtenerEstablecimientos","event","detail","value","getAllTasks","subscribe","item","getCurrentPosition","rta","myLatLng","coords","latitude","longitude","destino","parseFloat","tienda_lat","tienda_lon","mapEle","document","getElementById","Map","center","zoom","setMap","addListenerOnce","route","travelMode","TravelMode","DRIVING","response","status","DirectionsStatus","OK","setDirections","console","log","classList","add","task","latitud","longitud","idEstablecimiento","qc_id","registrarBusqueda","newTask","selector","template"],"mappings":"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","file":"rutas-rutas-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"dark\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>\\n      Busqueda del Establecimiento\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div *ngIf=\\\"seccion\\\">\\n    <br>\\n    <ion-searchbar placeholder=\\\"Busque el Secto del Establecimiento\\\" (ionChange)=\\\"buscar($event)\\\"></ion-searchbar>\\n      <ion-list *ngFor=\\\"let e of establecimientos | filtro: textoBuscar\\\" class=\\\"lista\\\">\\n        <ion-card class=\\\"card\\\">\\n          \\n          <ion-card-header color=\\\"light\\\" class=\\\"ion-text-center\\\"> Establecimiento: {{e.tienda_nom}}</ion-card-header>\\n          <br>\\n          <ion-label class=\\\"label\\\"><ion-icon class=\\\"icon\\\" name=\\\"navigate\\\"></ion-icon> Sector: {{e.tienda_sec}}</ion-label>\\n          <br>\\n          <br>\\n          <ion-label class=\\\"label\\\"><ion-icon class=\\\"icon\\\" name=\\\"map\\\"></ion-icon>Dirección: {{e.tienda_dir}}</ion-label>\\n          <ion-card-content lines=full>\\n            <ion-label class=\\\"label\\\"><ion-icon class=\\\"icon\\\" name=\\\"card-outline\\\"></ion-icon> Pagos Disponibles: {{e.tienda_pag}}</ion-label>\\n            <br>\\n            <ion-button class=\\\"ion-text-center botones\\\" color=\\\"dark\\\" (click)=\\\"trazarRuta(e)\\\">¿Cómo llegar?</ion-button>\\n          </ion-card-content>\\n        </ion-card>\\n      </ion-list>\\n  </div>\\n  <div id=\\\"map\\\" *ngIf=\\\"mapa\\\"></div>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RutasPage } from './rutas.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RutasPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RutasPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RutasPageRoutingModule } from './rutas-routing.module';\n\nimport { RutasPage } from './rutas.page';\nimport { PipesModule } from '../pipes/pipes.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RutasPageRoutingModule,\n    PipesModule\n  ],\n  declarations: [RutasPage]\n})\nexport class RutasPageModule {}\n","export default \".lista {\\n  width: 100%;\\n}\\n\\n.centrar {\\n  text-align: center;\\n}\\n\\n#map {\\n  width: 100%;\\n  height: 100%;\\n  display: block;\\n  opacity: 0;\\n  transition: opacity 150ms ease-in;\\n}\\n\\n#map.show-map {\\n  opacity: 1;\\n}\\n\\n.label {\\n  color: black;\\n  margin-left: 10px;\\n}\\n\\n.card {\\n  font-weight: bold;\\n  font-size: 16px;\\n}\\n\\n.icon {\\n  margin-right: 5px;\\n}\\n\\n.botones {\\n  width: 100%;\\n  height: 30px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcnV0YXMvQzpcXEFwbGljYWNpb25lc1xcVGVzaXNHZW9wb3J0YWwvc3JjXFxhcHBcXHJ1dGFzXFxydXRhcy5wYWdlLnNjc3MiLCJzcmMvYXBwL3J1dGFzL3J1dGFzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFdBQUE7QUNDSjs7QURDQTtFQUNJLGtCQUFBO0FDRUo7O0FEQUE7RUFDSSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGNBQUE7RUFDQSxVQUFBO0VBQ0EsaUNBQUE7QUNHSjs7QURGSTtFQUNJLFVBQUE7QUNJUjs7QUREQTtFQUNJLFlBQUE7RUFDQSxpQkFBQTtBQ0lKOztBREZBO0VBQ0ksaUJBQUE7RUFDQSxlQUFBO0FDS0o7O0FESEE7RUFDSSxpQkFBQTtBQ01KOztBREpBO0VBQ0ksV0FBQTtFQUNBLFlBQUE7QUNPSiIsImZpbGUiOiJzcmMvYXBwL3J1dGFzL3J1dGFzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5saXN0YXtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG59XHJcbi5jZW50cmFye1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcbiNtYXB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGhlaWdodDogMTAwJTtcclxuICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgb3BhY2l0eTogMDtcclxuICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMTUwbXMgZWFzZS1pbjtcclxuICAgICYuc2hvdy1tYXB7XHJcbiAgICAgICAgb3BhY2l0eTogMTtcclxuICAgIH1cclxufVxyXG4ubGFiZWx7XHJcbiAgICBjb2xvcjogYmxhY2s7XHJcbiAgICBtYXJnaW4tbGVmdDoxMHB4O1xyXG59XHJcbi5jYXJke1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICBmb250LXNpemU6IDE2cHg7XHJcbn1cclxuLmljb257XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDVweDtcclxufVxyXG4uYm90b25lc3tcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgaGVpZ2h0OiAzMHB4O1xyXG4gIH0iLCIubGlzdGEge1xuICB3aWR0aDogMTAwJTtcbn1cblxuLmNlbnRyYXIge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbiNtYXAge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBkaXNwbGF5OiBibG9jaztcbiAgb3BhY2l0eTogMDtcbiAgdHJhbnNpdGlvbjogb3BhY2l0eSAxNTBtcyBlYXNlLWluO1xufVxuI21hcC5zaG93LW1hcCB7XG4gIG9wYWNpdHk6IDE7XG59XG5cbi5sYWJlbCB7XG4gIGNvbG9yOiBibGFjaztcbiAgbWFyZ2luLWxlZnQ6IDEwcHg7XG59XG5cbi5jYXJkIHtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIGZvbnQtc2l6ZTogMTZweDtcbn1cblxuLmljb24ge1xuICBtYXJnaW4tcmlnaHQ6IDVweDtcbn1cblxuLmJvdG9uZXMge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAzMHB4O1xufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { Geolocation, Geoposition } from '@ionic-native/geolocation/ngx';\nimport { TaskService } from './../services/task.service';\ndeclare var google;\ninterface Marker{\n  position: {\n    lat: number,\n    lng: number,\n  };\n  title: string;\n  sector: string;\n}\n\n@Component({\n  selector: 'app-rutas',\n  templateUrl: './rutas.page.html',\n  styleUrls: ['./rutas.page.scss'],\n})\nexport class RutasPage implements OnInit {\n  seccion: boolean = true;\n  mapa: boolean = false;\n  map = null;\n  plataforma: string = 'Móvil';\n  latitudActual: number;\n  longitudActual: number;\n  textoBuscar = '';\n  directionsService = new google.maps.DirectionsService();\n  directionsDisplay = new google.maps.DirectionsRenderer();\n  origin = {lat: -2.859241633075849, lng:-78.96410264841003 };\n  destination = {lat: -2.861309718788423, lng: -78.96615185609741 }; \n  public establecimientos: any = [];\n  markers: Marker[] = [\n    {\n      position: {\n        lat: -2.859241633075849,\n        lng: -78.96410264841003,\n      },\n      title: 'Local 1',\n      sector: 'sector1'\n    },\n    {\n      position: {\n        lat: -2.859895277149761,\n        lng: -78.96179594865723,\n      },\n      title: 'Local 2',\n      sector: 'sector2'\n    },\n    {\n      position: {\n        lat: -2.8602488877229897,\n        lng: -78.96578707567139,\n      },\n      title: 'Local 3',\n      sector: 'sector3'\n    },\n    {\n      position: {\n        lat: -2.860934677614838,\n        lng: -78.96839418283386,\n      },\n      title: 'Local 4',\n      sector: 'sector4'\n    },\n    {\n      position: {\n        lat: -2.861309718788423,\n        lng: -78.96615185609741,\n      },\n      title: 'Local 5',\n      sector: 'sector5'\n    }\n  ];\n\n  constructor(private geolocation: Geolocation,private taskService: TaskService) { }\n\n  ngOnInit() {\n    this.obtenerEstablecimientos();\n  }\n  buscar(event){\n    this.textoBuscar = event.detail.value;\n  }\n  obtenerEstablecimientos(){\n  this.taskService.getAllTasks().subscribe(establecimientos =>{\n    this.establecimientos = establecimientos;\n  });\n}\nasync trazarRuta(item){\n  this.seccion = false;\n  this.mapa = true;\n  const rta = await this.geolocation.getCurrentPosition();\n  \n  const myLatLng = {\n      lat: rta.coords.latitude,\n      lng: rta.coords.longitude\n    };\n  const destino = {\n    lat: parseFloat(item.tienda_lat),\n    lng: parseFloat(item.tienda_lon)\n  }\n  const mapEle: HTMLElement = document.getElementById('map');\n  this.map = new google.maps.Map(mapEle,{\n      center: myLatLng,\n      zoom: 15\n    });\n  this.directionsDisplay.setMap(this.map);\n  google.maps.event\n  .addListenerOnce(this.map, 'idle', () =>{\n    this.directionsService.route({\n      origin: myLatLng,\n      destination: destino,\n      travelMode: google.maps.TravelMode.DRIVING,\n    }, (response, status) =>{\n      if(status === google.maps.DirectionsStatus.OK){\n        this.directionsDisplay.setDirections(response);\n      }else{\n        console.log('error');\n      }\n    });\n    mapEle.classList.add('show-map');\n    });\n  const task = {\n      plataforma: this.plataforma,\n      latitud: rta.coords.latitude,\n      longitud: rta.coords.longitude,\n      idEstablecimiento: item.qc_id\n     };\n  this.taskService.registrarBusqueda(task)\n      .subscribe((newTask) =>{\n       console.log(newTask);\n      });\n}\n}\n"]}