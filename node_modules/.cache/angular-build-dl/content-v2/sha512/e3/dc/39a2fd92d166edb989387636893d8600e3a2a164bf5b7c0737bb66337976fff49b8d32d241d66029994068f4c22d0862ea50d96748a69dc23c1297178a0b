{"version":3,"sources":["./src/app/rutas/rutas.page.html","./src/app/rutas/rutas-routing.module.ts","./src/app/rutas/rutas.module.ts","./src/app/rutas/rutas.page.scss","./src/app/rutas/rutas.page.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,0sBAA2oB,cAAc,0IAA0I,cAAc,iJAAiJ,cAAc,8KAA8K,cAAc,0SAA0S,E;;;;;;;;;;;;;;;;;;;ACA55C;AACc;AAEd;AAEzC,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,qDAAS;KACrB;CACF,CAAC;AAMF,IAAa,sBAAsB,GAAnC,MAAa,sBAAsB;CAAG;AAAzB,sBAAsB;IAJlC,8DAAQ,CAAC;QACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;KACxB,CAAC;GACW,sBAAsB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;AChBM;AACM;AACF;AAEA;AAEmB;AAEvB;AACW;AAYpD,IAAa,eAAe,GAA5B,MAAa,eAAe;CAAG;AAAlB,eAAe;IAV3B,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,4EAAsB;YACtB,+DAAW;SACZ;QACD,YAAY,EAAE,CAAC,qDAAS,CAAC;KAC1B,CAAC;GACW,eAAe,CAAG;AAAH;;;;;;;;;;;;;ACrB5B;AAAe,wEAAS,gBAAgB,GAAG,cAAc,uBAAuB,GAAG,UAAU,gBAAgB,iBAAiB,mBAAmB,eAAe,sCAAsC,GAAG,mBAAmB,eAAe,GAAG,YAAY,iBAAiB,sBAAsB,GAAG,WAAW,sBAAsB,oBAAoB,GAAG,WAAW,sBAAsB,GAAG,cAAc,gBAAgB,iBAAiB,GAAG,6CAA6C,+zDAA+zD,E;;;;;;;;;;;;;;;;;;;ACA5uE;AACuB;AAChB;AAgBzD,IAAa,SAAS,GAAtB,MAAa,SAAS;IAwDpB,YAAoB,WAAwB,EAAS,WAAwB;QAAzD,gBAAW,GAAX,WAAW,CAAa;QAAS,gBAAW,GAAX,WAAW,CAAa;QAvD7E,YAAO,GAAY,IAAI,CAAC;QACxB,SAAI,GAAY,KAAK,CAAC;QACtB,QAAG,GAAG,IAAI,CAAC;QACX,eAAU,GAAW,OAAO,CAAC;QAG7B,gBAAW,GAAG,EAAE,CAAC;QACjB,sBAAiB,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACxD,sBAAiB,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC;QACzD,WAAM,GAAG,EAAC,GAAG,EAAE,CAAC,iBAAiB,EAAE,GAAG,EAAC,CAAC,iBAAiB,EAAE,CAAC;QAC5D,gBAAW,GAAG,EAAC,GAAG,EAAE,CAAC,iBAAiB,EAAE,GAAG,EAAE,CAAC,iBAAiB,EAAE,CAAC;QAC3D,qBAAgB,GAAQ,EAAE,CAAC;QAClC,YAAO,GAAa;YAClB;gBACE,QAAQ,EAAE;oBACR,GAAG,EAAE,CAAC,iBAAiB;oBACvB,GAAG,EAAE,CAAC,iBAAiB;iBACxB;gBACD,KAAK,EAAE,SAAS;gBAChB,MAAM,EAAE,SAAS;aAClB;YACD;gBACE,QAAQ,EAAE;oBACR,GAAG,EAAE,CAAC,iBAAiB;oBACvB,GAAG,EAAE,CAAC,iBAAiB;iBACxB;gBACD,KAAK,EAAE,SAAS;gBAChB,MAAM,EAAE,SAAS;aAClB;YACD;gBACE,QAAQ,EAAE;oBACR,GAAG,EAAE,CAAC,kBAAkB;oBACxB,GAAG,EAAE,CAAC,iBAAiB;iBACxB;gBACD,KAAK,EAAE,SAAS;gBAChB,MAAM,EAAE,SAAS;aAClB;YACD;gBACE,QAAQ,EAAE;oBACR,GAAG,EAAE,CAAC,iBAAiB;oBACvB,GAAG,EAAE,CAAC,iBAAiB;iBACxB;gBACD,KAAK,EAAE,SAAS;gBAChB,MAAM,EAAE,SAAS;aAClB;YACD;gBACE,QAAQ,EAAE;oBACR,GAAG,EAAE,CAAC,iBAAiB;oBACvB,GAAG,EAAE,CAAC,iBAAiB;iBACxB;gBACD,KAAK,EAAE,SAAS;gBAChB,MAAM,EAAE,SAAS;aAClB;SACF,CAAC;IAE+E,CAAC;IAElF,QAAQ;QACN,IAAI,CAAC,uBAAuB,EAAE,CAAC;IACjC,CAAC;IACD,MAAM,CAAC,KAAK;QACV,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC;IACxC,CAAC;IACD,uBAAuB;QACvB,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,gBAAgB,CAAC,EAAE;YAC1D,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;QAC3C,CAAC,CAAC,CAAC;IACL,CAAC;IACK,UAAU,CAAC,IAAI;;YACnB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YACjB,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,kBAAkB,EAAE,CAAC;YAExD,MAAM,QAAQ,GAAG;gBACb,GAAG,EAAE,GAAG,CAAC,MAAM,CAAC,QAAQ;gBACxB,GAAG,EAAE,GAAG,CAAC,MAAM,CAAC,SAAS;aAC1B,CAAC;YACJ,MAAM,OAAO,GAAG;gBACd,GAAG,EAAE,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC;gBAChC,GAAG,EAAE,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC;aACjC;YACD,MAAM,MAAM,GAAgB,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;YAC3D,IAAI,CAAC,GAAG,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,EAAC;gBAClC,MAAM,EAAE,QAAQ;gBAChB,IAAI,EAAE,EAAE;aACT,CAAC,CAAC;YACL,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YACxC,MAAM,CAAC,IAAI,CAAC,KAAK;iBAChB,eAAe,CAAC,IAAI,CAAC,GAAG,EAAE,MAAM,EAAE,GAAG,EAAE;gBACtC,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC;oBAC3B,MAAM,EAAE,QAAQ;oBAChB,WAAW,EAAE,OAAO;oBACpB,UAAU,EAAE,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO;iBAC3C,EAAE,CAAC,QAAQ,EAAE,MAAM,EAAE,EAAE;oBACtB,IAAG,MAAM,KAAK,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,EAAE,EAAC;wBAC5C,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;qBAChD;yBAAI;wBACH,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;qBACtB;gBACH,CAAC,CAAC,CAAC;gBACH,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;YACjC,CAAC,CAAC,CAAC;YACL,MAAM,IAAI,GAAG;gBACT,UAAU,EAAE,IAAI,CAAC,UAAU;gBAC3B,OAAO,EAAE,GAAG,CAAC,MAAM,CAAC,QAAQ;gBAC5B,QAAQ,EAAE,GAAG,CAAC,MAAM,CAAC,SAAS;gBAC9B,iBAAiB,EAAE,IAAI,CAAC,KAAK;aAC7B,CAAC;YACL,IAAI,CAAC,WAAW,CAAC,iBAAiB,CAAC,IAAI,CAAC;iBACnC,SAAS,CAAC,CAAC,OAAO,EAAE,EAAE;gBACtB,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YACtB,CAAC,CAAC,CAAC;QACT,CAAC;KAAA;CACA;;YA1DkC,yEAAW;YAAsB,kEAAW;;AAxDlE,SAAS;IALrB,+DAAS,CAAC;QACT,QAAQ,EAAE,WAAW;QACrB,iNAAgC;;KAEjC,CAAC;GACW,SAAS,CAkHrB;AAlHqB","file":"rutas-rutas-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"dark\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>\\n      Busqueda del Establecimiento\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div *ngIf=\\\"seccion\\\">\\n    <br>\\n    <ion-searchbar placeholder=\\\"Busque el Secto del Establecimiento\\\" (ionChange)=\\\"buscar($event)\\\"></ion-searchbar>\\n      <ion-list *ngFor=\\\"let e of establecimientos | filtro: textoBuscar\\\" class=\\\"lista\\\">\\n        <ion-card class=\\\"card\\\">\\n          \\n          <ion-card-header color=\\\"light\\\" class=\\\"ion-text-center\\\"> Establecimiento: {{e.tienda_nom}}</ion-card-header>\\n          <br>\\n          <ion-label class=\\\"label\\\"><ion-icon class=\\\"icon\\\" name=\\\"navigate\\\"></ion-icon> Sector: {{e.tienda_sec}}</ion-label>\\n          <br>\\n          <br>\\n          <ion-label class=\\\"label\\\"><ion-icon class=\\\"icon\\\" name=\\\"map\\\"></ion-icon>Dirección: {{e.tienda_dir}}</ion-label>\\n          <ion-card-content lines=full>\\n            <ion-label class=\\\"label\\\"><ion-icon class=\\\"icon\\\" name=\\\"card-outline\\\"></ion-icon> Pagos Disponibles: {{e.tienda_pag}}</ion-label>\\n            <br>\\n            <ion-button class=\\\"ion-text-center botones\\\" color=\\\"dark\\\" (click)=\\\"trazarRuta(e)\\\">¿Cómo llegar?</ion-button>\\n          </ion-card-content>\\n        </ion-card>\\n      </ion-list>\\n  </div>\\n  <div id=\\\"map\\\" *ngIf=\\\"mapa\\\"></div>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RutasPage } from './rutas.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RutasPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RutasPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RutasPageRoutingModule } from './rutas-routing.module';\n\nimport { RutasPage } from './rutas.page';\nimport { PipesModule } from '../pipes/pipes.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RutasPageRoutingModule,\n    PipesModule\n  ],\n  declarations: [RutasPage]\n})\nexport class RutasPageModule {}\n","export default \".lista {\\n  width: 100%;\\n}\\n\\n.centrar {\\n  text-align: center;\\n}\\n\\n#map {\\n  width: 100%;\\n  height: 100%;\\n  display: block;\\n  opacity: 0;\\n  transition: opacity 150ms ease-in;\\n}\\n\\n#map.show-map {\\n  opacity: 1;\\n}\\n\\n.label {\\n  color: black;\\n  margin-left: 10px;\\n}\\n\\n.card {\\n  font-weight: bold;\\n  font-size: 16px;\\n}\\n\\n.icon {\\n  margin-right: 5px;\\n}\\n\\n.botones {\\n  width: 100%;\\n  height: 30px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcnV0YXMvQzpcXEFwbGljYWNpb25lc1xcVGVzaXNHZW9wb3J0YWwvc3JjXFxhcHBcXHJ1dGFzXFxydXRhcy5wYWdlLnNjc3MiLCJzcmMvYXBwL3J1dGFzL3J1dGFzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFdBQUE7QUNDSjs7QURDQTtFQUNJLGtCQUFBO0FDRUo7O0FEQUE7RUFDSSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGNBQUE7RUFDQSxVQUFBO0VBQ0EsaUNBQUE7QUNHSjs7QURGSTtFQUNJLFVBQUE7QUNJUjs7QUREQTtFQUNJLFlBQUE7RUFDQSxpQkFBQTtBQ0lKOztBREZBO0VBQ0ksaUJBQUE7RUFDQSxlQUFBO0FDS0o7O0FESEE7RUFDSSxpQkFBQTtBQ01KOztBREpBO0VBQ0ksV0FBQTtFQUNBLFlBQUE7QUNPSiIsImZpbGUiOiJzcmMvYXBwL3J1dGFzL3J1dGFzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5saXN0YXtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG59XHJcbi5jZW50cmFye1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcbiNtYXB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGhlaWdodDogMTAwJTtcclxuICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgb3BhY2l0eTogMDtcclxuICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMTUwbXMgZWFzZS1pbjtcclxuICAgICYuc2hvdy1tYXB7XHJcbiAgICAgICAgb3BhY2l0eTogMTtcclxuICAgIH1cclxufVxyXG4ubGFiZWx7XHJcbiAgICBjb2xvcjogYmxhY2s7XHJcbiAgICBtYXJnaW4tbGVmdDoxMHB4O1xyXG59XHJcbi5jYXJke1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICBmb250LXNpemU6IDE2cHg7XHJcbn1cclxuLmljb257XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDVweDtcclxufVxyXG4uYm90b25lc3tcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgaGVpZ2h0OiAzMHB4O1xyXG4gIH0iLCIubGlzdGEge1xuICB3aWR0aDogMTAwJTtcbn1cblxuLmNlbnRyYXIge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbiNtYXAge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBkaXNwbGF5OiBibG9jaztcbiAgb3BhY2l0eTogMDtcbiAgdHJhbnNpdGlvbjogb3BhY2l0eSAxNTBtcyBlYXNlLWluO1xufVxuI21hcC5zaG93LW1hcCB7XG4gIG9wYWNpdHk6IDE7XG59XG5cbi5sYWJlbCB7XG4gIGNvbG9yOiBibGFjaztcbiAgbWFyZ2luLWxlZnQ6IDEwcHg7XG59XG5cbi5jYXJkIHtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIGZvbnQtc2l6ZTogMTZweDtcbn1cblxuLmljb24ge1xuICBtYXJnaW4tcmlnaHQ6IDVweDtcbn1cblxuLmJvdG9uZXMge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAzMHB4O1xufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { Geolocation, Geoposition } from '@ionic-native/geolocation/ngx';\nimport { TaskService } from './../services/task.service';\ndeclare var google;\ninterface Marker{\n  position: {\n    lat: number,\n    lng: number,\n  };\n  title: string;\n  sector: string;\n}\n\n@Component({\n  selector: 'app-rutas',\n  templateUrl: './rutas.page.html',\n  styleUrls: ['./rutas.page.scss'],\n})\nexport class RutasPage implements OnInit {\n  seccion: boolean = true;\n  mapa: boolean = false;\n  map = null;\n  plataforma: string = 'Móvil';\n  latitudActual: number;\n  longitudActual: number;\n  textoBuscar = '';\n  directionsService = new google.maps.DirectionsService();\n  directionsDisplay = new google.maps.DirectionsRenderer();\n  origin = {lat: -2.859241633075849, lng:-78.96410264841003 };\n  destination = {lat: -2.861309718788423, lng: -78.96615185609741 }; \n  public establecimientos: any = [];\n  markers: Marker[] = [\n    {\n      position: {\n        lat: -2.859241633075849,\n        lng: -78.96410264841003,\n      },\n      title: 'Local 1',\n      sector: 'sector1'\n    },\n    {\n      position: {\n        lat: -2.859895277149761,\n        lng: -78.96179594865723,\n      },\n      title: 'Local 2',\n      sector: 'sector2'\n    },\n    {\n      position: {\n        lat: -2.8602488877229897,\n        lng: -78.96578707567139,\n      },\n      title: 'Local 3',\n      sector: 'sector3'\n    },\n    {\n      position: {\n        lat: -2.860934677614838,\n        lng: -78.96839418283386,\n      },\n      title: 'Local 4',\n      sector: 'sector4'\n    },\n    {\n      position: {\n        lat: -2.861309718788423,\n        lng: -78.96615185609741,\n      },\n      title: 'Local 5',\n      sector: 'sector5'\n    }\n  ];\n\n  constructor(private geolocation: Geolocation,private taskService: TaskService) { }\n\n  ngOnInit() {\n    this.obtenerEstablecimientos();\n  }\n  buscar(event){\n    this.textoBuscar = event.detail.value;\n  }\n  obtenerEstablecimientos(){\n  this.taskService.getAllTasks().subscribe(establecimientos =>{\n    this.establecimientos = establecimientos;\n  });\n}\nasync trazarRuta(item){\n  this.seccion = false;\n  this.mapa = true;\n  const rta = await this.geolocation.getCurrentPosition();\n  \n  const myLatLng = {\n      lat: rta.coords.latitude,\n      lng: rta.coords.longitude\n    };\n  const destino = {\n    lat: parseFloat(item.tienda_lat),\n    lng: parseFloat(item.tienda_lon)\n  }\n  const mapEle: HTMLElement = document.getElementById('map');\n  this.map = new google.maps.Map(mapEle,{\n      center: myLatLng,\n      zoom: 15\n    });\n  this.directionsDisplay.setMap(this.map);\n  google.maps.event\n  .addListenerOnce(this.map, 'idle', () =>{\n    this.directionsService.route({\n      origin: myLatLng,\n      destination: destino,\n      travelMode: google.maps.TravelMode.DRIVING,\n    }, (response, status) =>{\n      if(status === google.maps.DirectionsStatus.OK){\n        this.directionsDisplay.setDirections(response);\n      }else{\n        console.log('error');\n      }\n    });\n    mapEle.classList.add('show-map');\n    });\n  const task = {\n      plataforma: this.plataforma,\n      latitud: rta.coords.latitude,\n      longitud: rta.coords.longitude,\n      idEstablecimiento: item.qc_id\n     };\n  this.taskService.registrarBusqueda(task)\n      .subscribe((newTask) =>{\n       console.log(newTask);\n      });\n}\n}\n"],"sourceRoot":"webpack:///"}